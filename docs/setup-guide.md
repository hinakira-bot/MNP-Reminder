# MNP実践トラッカー Bot 導入ガイド

## このBotでできること

コミュニティメンバーのMNP副業の実践を記録・可視化し、
実践していないメンバーに自動でリマインドを送るBotです。

### 主な機能
- 🎯 **実践完了ボタン** … 店舗でMNP契約をしたら押す
- 🎉 **実践報告** … 実践した人を自動で全体に共有
- 📢 **自動リマインド** … 一定期間実践していない人に自動通知
- 🏅 **ロール自動付与** … 実践した人に自動でロールが付く
- 🏆 **ランキング** … 実践回数のランキングを表示
- 👤 **全メンバー自動追跡** … サーバーの全メンバーが自動で追跡対象に
- ⏱️ **個別リマインド設定** … メンバーごとにリマインドのタイミングを変更可能

---

## 導入手順（サーバー管理者向け）

### ステップ1：Botをサーバーに招待

以下のURLをブラウザで開いてください。

```
https://discord.com/oauth2/authorize?client_id=1476408639043539044&permissions=2147486464&scope=bot+applications.commands
```

→ サーバーを選択 →「認証」を押す

> ※ Bot には「メッセージ送信」「埋め込みリンク」「メンション」「ロール管理」の権限が必要です。

### ステップ2：チャンネルを3つ用意

| チャンネル | 用途 |
|-----------|------|
| #実践ボタン | ボタンを設置する場所（ボタン専用。ここには他のメッセージが流れません） |
| #実践報告 | 「🎉 ○○さんが実践しました！」が自動投稿される場所 |
| #リマインド | 未実践メンバーへの自動通知が届く場所 |

※ チャンネル名は自由です。既存のチャンネルを使ってもOKです。
※ チャンネル名を後から変更しても、再設定は不要です。

### ステップ3：Botの初期設定

以下の3つのコマンドを実行するだけで使い始められます。

**① ボタンを設置する**
`#実践ボタン` チャンネルで：
```
/setup
```
→ 「実践完了！」ボタンが設置されます。

**② 実践報告チャンネルを設定する**
```
/set-report-channel #実践報告
```
→ 実践完了の公開メッセージがこのチャンネルに届きます。

**③ リマインドチャンネルを設定する**
```
/set-reminder-channel #リマインド
```
→ 未実践メンバーへの通知がこのチャンネルに届きます。

**以上で基本設定は完了です！**

### ステップ4：オプション設定（任意）

**実践者にロールを自動付与する場合：**

1. Discordのサーバー設定で「実践者」などのロールを作成
2. サーバー設定 → ロール で、**Botのロールを「実践者」ロールより上に移動**
3. 以下のコマンドを実行：
```
/set-practice-role @実践者
```
→ 実践完了ボタンを押した人に自動でロールが付与されます。

---

## メンバー向けの使い方

店舗でMNP契約をしたら、🎯 **「実践完了！」ボタン** を押すだけです。

### ボタンを押すとどうなる？

- 本人に確認メッセージが表示されます（他の人には見えません）
- 実践報告チャンネルに「🎉 ○○さんが実践しました！」と共有されます
- ロールが設定されている場合、自動でロールが付きます

---

## リマインド機能について

### 仕組み
- サーバーの全メンバーが**自動で追跡対象**になります（設定不要）
- 新しくサーバーに参加した人も自動で追跡対象に追加されます
- 毎日設定した時刻（デフォルト：朝9時）に自動チェックが行われます

### リマインドの内容

一定期間（デフォルト7日）実践を記録していないメンバーに、
🔥「継続は力なり！次の実践に挑戦しましょう！」とリマインドが送られます。

### 個別にリマインド期間を変えたい場合

メンバーごとにリマインドの閾値（何日で通知するか）を個別に設定できます。

```
/set-member-reminder @田中 3
```
→ 田中さんは3日間未実践でリマインドが届く

```
/set-member-reminder @田中 0
```
→ 田中さんの設定をサーバーデフォルトに戻す

---

## 管理者向け：全コマンド一覧

### 初期設定コマンド

| コマンド | 説明 |
|---------|------|
| `/setup` | 現在のチャンネルに実践ボタンを設置する |
| `/set-report-channel #チャンネル` | 実践報告の投稿先チャンネルを設定 |
| `/set-reminder-channel #チャンネル` | リマインドの投稿先チャンネルを設定 |
| `/set-practice-role @ロール` | 実践完了時に付与するロールを設定 |

### リマインド設定コマンド

| コマンド | 説明 |
|---------|------|
| `/set-reminder-days 日数` | サーバー全体のリマインド閾値を変更（デフォルト：7日） |
| `/set-reminder-time 09:00` | 自動チェックの時刻を変更（JST、デフォルト：09:00） |
| `/set-member-reminder @メンバー 日数` | 特定メンバーのリマインド閾値を個別設定（0でデフォルトに戻す） |
| `/check-inactive` | 今すぐ未実践メンバーをチェックしてリマインド送信 |

### メンバー管理コマンド

| コマンド | 説明 |
|---------|------|
| `/register @メンバー` | メンバーを手動で追跡対象に追加 |
| `/unregister @メンバー` | メンバーを追跡対象から外す（リマインドが届かなくなる） |

### 統計コマンド

| コマンド | 説明 |
|---------|------|
| `/stats` | 実践ランキングを表示（全メンバーに公開） |
| `/stats @メンバー` | 特定メンバーの統計を表示 |
| `/stats period:7` | 7日間のランキング |
| `/stats period:30` | 30日間のランキング |

※ `/stats` 以外の管理コマンドは **サーバー管理者のみ** 使用できます。

---

## チャンネル構成の例

設定後のサーバーはこのようなイメージです。

```
📁 MNP副業
  ├── #実践ボタン     ← ボタンだけ（常にきれい）
  ├── #実践報告       ← 「🎉 ○○さんが実践しました！」が流れる
  └── #リマインド     ← 未実践者への自動通知
```

---

## よくある質問

**Q. ボタンは何回でも押せますか？**
はい。ただし連打防止のため、1分以内の連続クリックは無視されます。

**Q. 全メンバーが自動で追跡されますか？**
はい。Bot がサーバーに参加した時点で、既存の全メンバーが自動登録されます。
新しく参加したメンバーも自動で登録されます。
追跡を外したい場合は `/unregister @メンバー` を使ってください。

**Q. チャンネル名を後から変えても大丈夫？**
はい。Bot はチャンネルIDで管理しているため、名前を変えても影響ありません。

**Q. チャンネルを削除して作り直したら？**
その場合は再設定が必要です（`/set-report-channel` などを再実行）。

**Q. リマインドは毎日届きますか？**
はい。設定した時刻に毎日チェックが行われ、閾値を超えた未実践メンバーがいれば通知されます。

**Q. 特定の人だけリマインド頻度を変えたい**
`/set-member-reminder @メンバー 日数` で個別に設定できます。
0を指定するとサーバーのデフォルト値に戻ります。

**Q. ロールはいつ付きますか？**
実践完了ボタンを初めて押した時に付与されます。
既にロールを持っている場合は再付与されません。

**Q. 複数のサーバーで使えますか？**
はい。各サーバーの設定・データは完全に独立しています。

**Q. Bot がオフラインの間のデータは？**
Bot がオフラインの間はボタンが反応しません。Bot が復帰すればすぐに使えるようになります。
オフライン中のリマインドは、次回のチェック時刻にまとめて実行されます。
